<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Quick start guide • corella</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Quick start guide">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">corella</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/quick_start_guide.html">Quick start guide</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/checking-your-dataset.html">Checking your dataset</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/AtlasOfLivingAustralia/corella/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Quick start guide</h1>
                        <h4 data-toc-skip class="author">Dax Kellie</h4>
            
            <h4 data-toc-skip class="date">2024-12-12</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/AtlasOfLivingAustralia/corella/blob/main/vignettes/quick_start_guide.Rmd" class="external-link"><code>vignettes/quick_start_guide.Rmd</code></a></small>
      <div class="d-none name"><code>quick_start_guide.Rmd</code></div>
    </div>

    
    
<p>corella is a tool for standardising data in R to use the <a href="https://www.gbif.org/darwin-core" class="external-link"><em>Darwin Core
Standard</em></a>. Darwin Core Standard is the primary data standard for
species occurrence data—records of organisms observed in a location and
time—in the <a href="https://ala.org.au/" class="external-link">Atlas of Living Australia
(ALA)</a>, other <a href="https://living-atlases.gbif.org/" class="external-link">Living
Atlases</a> and the <a href="https://www.gbif.org/" class="external-link">Global Biodiversity
Information Facility (GBIF)</a>. The standard allows the ability to
compile data from a variety of sources, improving the ease to share, use
and reuse data.</p>
<p>The main tasks to standardise data with Darwin Core Standard are:</p>
<ol style="list-style-type: decimal">
<li>Ensure columns use valid Darwin Core terms as column names</li>
<li>Include all required information (e.g. scientific name, unique
observation ID, valid date)</li>
<li>Ensure columns contain valid data</li>
</ol>
<p>This process can be daunting. corella is designed to reduce confusion
of how to get started, and help determine which Darwin Core terms might
match your column names.</p>
<div class="section level2">
<h2 id="install">Install<a class="anchor" aria-label="anchor" href="#install"></a>
</h2>
<p>To install from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"corella"</span><span class="op">)</span></span></code></pre></div>
<p>To install the development version from GitHub:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"AtlasOfLivingAustralia/corella"</span><span class="op">)</span></span></code></pre></div>
<p>To load the package:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://corella.ala.org.au">corella</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="rename-add-or-edit-columns">Rename, add or edit columns<a class="anchor" aria-label="anchor" href="#rename-add-or-edit-columns"></a>
</h2>
<p>Here is a minimal example dataset of cockatoo observations. In our
dataframe <code>df</code> there are columns that contain information
that we would like to standardise using Darwin Core.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  latitude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">35.310</span>, <span class="st">"-35.273"</span><span class="op">)</span>, <span class="co"># deliberate error for demonstration purposes</span></span>
<span>  longitude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">149.125</span>, <span class="fl">149.133</span><span class="op">)</span>,</span>
<span>  date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"14-01-2023"</span>, <span class="st">"15-01-2023"</span><span class="op">)</span>,</span>
<span>  time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"10:23:00"</span>, <span class="st">"11:25:00"</span><span class="op">)</span>,</span>
<span>  month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"January"</span>, <span class="st">"February"</span><span class="op">)</span>,</span>
<span>  day <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">101</span><span class="op">)</span>,</span>
<span>  species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Callocephalon fimbriatum"</span>, <span class="st">"Eolophus roseicapilla"</span><span class="op">)</span>,</span>
<span>  n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"WGS84"</span>, <span class="st">"WGS8d"</span><span class="op">)</span>,</span>
<span>  country <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Australia"</span>, <span class="st">"Denmark"</span><span class="op">)</span>,</span>
<span>  continent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Oceania"</span>, <span class="st">"Europe"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">df</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 11</span></span></span>
<span><span class="co">#&gt;   latitude longitude date       time     month   day species     n crs   country</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> -35.31        149. 14-01-2023 10:23:00 Janu…   100 Calloc…     2 WGS84 Austra…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> -35.273       149. 15-01-2023 11:25:00 Febr…   101 Eoloph…     3 WGS8d Denmark</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: continent &lt;chr&gt;</span></span></span></code></pre></div>
<p>We can standardise our data with <code>set_</code> functions. The
<code>set_</code> functions possess a suffix name to identify what type
of data they are used to standardise (e.g. <code>set_coordinates</code>,
<code>set_datetime</code>), and arguments in <code>set_</code> functions
are valid Darwin Core <em>terms</em> (ie column names). By grouping
Darwin Core terms based on their data type, corella makes it easier for
users to find relevant Darwin Core terms to use as column names (one of
the most onerous parts of Darwin Core for new users).</p>
<p>Let’s specify that the scientific name (i.e. genus + species name) in
our data is in the <code>species</code> column by using
<code><a href="../reference/set_scientific_name.html">set_scientific_name()</a></code>. You’ll notice 2 things happen:</p>
<ol style="list-style-type: decimal">
<li>The <code>species</code> column in our dataframe is renamed to
<code>scientificName</code>
</li>
<li>
<code><a href="../reference/set_scientific_name.html">set_scientific_name()</a></code> runs a check on our
<code>species</code> column to make sure it is formatted correctly</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_scientific_name.html">set_scientific_name</a></span><span class="op">(</span>scientificName <span class="op">=</span> <span class="va">species</span><span class="op">)</span></span>
<span><span class="co">#&gt; ⠙ Checking 1 column: <span style="color: #00BB00;">scientificName</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking 1 column: <span style="color: #00BB00;">scientificName</span> <span style="color: #B2B2B2;">[335ms]</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 11</span></span></span>
<span><span class="co">#&gt;   latitude longitude date       time   month   day     n crs   country continent</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> -35.31        149. 14-01-2023 10:23… Janu…   100     2 WGS84 Austra… Oceania  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> -35.273       149. 15-01-2023 11:25… Febr…   101     3 WGS8d Denmark Europe   </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: scientificName &lt;chr&gt;</span></span></span></code></pre></div>
<p>What happens when we add a column with an error in it? The
<code>latitude</code> column in <code>df</code> is a class
<code>character</code> column, instead of a <code>numeric</code> column
as it should be. When we try to update the column name using
<code><a href="../reference/set_coordinates.html">set_coordinates()</a></code>, an error tells us the class is
wrong.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_scientific_name.html">set_scientific_name</a></span><span class="op">(</span>scientificName <span class="op">=</span> <span class="va">species</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_coordinates.html">set_coordinates</a></span><span class="op">(</span>decimalLongitude <span class="op">=</span> <span class="va">longitude</span>,</span>
<span>                  decimalLatitude <span class="op">=</span> <span class="va">latitude</span><span class="op">)</span></span>
<span><span class="co">#&gt; ⠙ Checking 1 column: <span style="color: #00BB00;">scientificName</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking 1 column: <span style="color: #00BB00;">scientificName</span> <span style="color: #B2B2B2;">[317ms]</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ⠙ Checking 2 columns: <span style="color: #00BB00;">decimalLatitude</span> and <span style="color: #00BB00;">decimalLongitude</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking 2 columns: <span style="color: #00BB00;">decimalLatitude</span> and <span style="color: #00BB00;">decimalLongitude</span> <span style="color: #B2B2B2;">[620ms]</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `check_decimalLatitude()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> <span style="color: #00BB00;">decimalLatitude</span> must be a numeric vector, not character.</span></span></code></pre></div>
<div class="section level3">
<h3 id="fix-or-update-columns">Fix or update columns<a class="anchor" aria-label="anchor" href="#fix-or-update-columns"></a>
</h3>
<p>To change, edit or fix a column, users can edit the column within the
<code>set_</code> function.</p>
<p>Each <code>set_</code> function is essentially a specialised <a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link"><code>dplyr::mutate()</code></a>,
meaning users can edit columns using the same processes they would when
using <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">dplyr::mutate()</a></code>. We can fix the <code>latitude</code>
column so that it is class <code>numeric</code> within the
<code><a href="../reference/set_coordinates.html">set_coordinates()</a></code> function.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_darwincore</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_scientific_name.html">set_scientific_name</a></span><span class="op">(</span>scientificName <span class="op">=</span> <span class="va">species</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_coordinates.html">set_coordinates</a></span><span class="op">(</span>decimalLongitude <span class="op">=</span> <span class="va">longitude</span>,</span>
<span>                  decimalLatitude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">latitude</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; ⠙ Checking 1 column: <span style="color: #00BB00;">scientificName</span></span></span>
<span><span class="co">#&gt; ⠹ Checking 1 column: <span style="color: #00BB00;">scientificName</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking 1 column: <span style="color: #00BB00;">scientificName</span> <span style="color: #B2B2B2;">[317ms]</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ⠙ Checking 2 columns: <span style="color: #00BB00;">decimalLatitude</span> and <span style="color: #00BB00;">decimalLongitude</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking 2 columns: <span style="color: #00BB00;">decimalLatitude</span> and <span style="color: #00BB00;">decimalLongitude</span> <span style="color: #B2B2B2;">[621ms]</span></span></span>
<span><span class="co">#&gt; </span></span>
<span></span>
<span><span class="va">df_darwincore</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 11</span></span></span>
<span><span class="co">#&gt;   date       time     month     day     n crs   country continent scientificName</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 14-01-2023 10:23:00 January   100     2 WGS84 Austra… Oceania   Callocephalon…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 15-01-2023 11:25:00 Februa…   101     3 WGS8d Denmark Europe    Eolophus rose…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: decimalLatitude &lt;dbl&gt;, decimalLongitude &lt;dbl&gt;</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="auto-detect-columns">Auto-detect columns<a class="anchor" aria-label="anchor" href="#auto-detect-columns"></a>
</h3>
<p>corella is also able to detect when a column exists in a data frame
that already has a valid Darwin Core term as a column name. For example,
<code>df</code> contains columns with locality information. We can add
<code><a href="../reference/set_locality.html">set_locality()</a></code> to our pipe to identify these columns, but
because several columns already have valid Darwin Core terms as column
names (<code>country</code> and <code>continent</code>),
<code><a href="../reference/set_locality.html">set_locality()</a></code> will detect these valid Darwin Core columns
in <code>df</code> and check them automatically.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_scientific_name.html">set_scientific_name</a></span><span class="op">(</span>scientificName <span class="op">=</span> <span class="va">species</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_coordinates.html">set_coordinates</a></span><span class="op">(</span>decimalLongitude <span class="op">=</span> <span class="va">longitude</span>,</span>
<span>                  decimalLatitude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">latitude</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_locality.html">set_locality</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; ⠙ Checking 1 column: <span style="color: #00BB00;">scientificName</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking 1 column: <span style="color: #00BB00;">scientificName</span> <span style="color: #B2B2B2;">[311ms]</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ⠙ Checking 2 columns: <span style="color: #00BB00;">decimalLatitude</span> and <span style="color: #00BB00;">decimalLongitude</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking 2 columns: <span style="color: #00BB00;">decimalLatitude</span> and <span style="color: #00BB00;">decimalLongitude</span> <span style="color: #B2B2B2;">[620ms]</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ⠙ Checking 2 columns: <span style="color: #00BB00;">country</span> and <span style="color: #00BB00;">continent</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Checking 2 columns: <span style="color: #00BB00;">country</span> and <span style="color: #00BB00;">continent</span> <span style="color: #B2B2B2;">[617ms]</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 11</span></span></span>
<span><span class="co">#&gt;   date       time     month     day     n crs   country continent scientificName</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 14-01-2023 10:23:00 January   100     2 WGS84 Austra… Oceania   Callocephalon…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 15-01-2023 11:25:00 Februa…   101     3 WGS8d Denmark Europe    Eolophus rose…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: decimalLatitude &lt;dbl&gt;, decimalLongitude &lt;dbl&gt;</span></span></span>
<span></span>
<span><span class="va">df_darwincore</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 11</span></span></span>
<span><span class="co">#&gt;   date       time     month     day     n crs   country continent scientificName</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 14-01-2023 10:23:00 January   100     2 WGS84 Austra… Oceania   Callocephalon…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 15-01-2023 11:25:00 Februa…   101     3 WGS8d Denmark Europe    Eolophus rose…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: decimalLatitude &lt;dbl&gt;, decimalLongitude &lt;dbl&gt;</span></span></span></code></pre></div>
<p>corella’s auto-detection prevents users from needing to specify every
single column, reducing the amount of typing for users when they have
already have valid Darwin Core column names!</p>
</div>
</div>
<div class="section level2">
<h2 id="suggest-a-workflow">Suggest a workflow<a class="anchor" aria-label="anchor" href="#suggest-a-workflow"></a>
</h2>
<p>Unsure where to start? Confused about the minimum requirements to
share your data? Using <code><a href="../reference/suggest_workflow.html">suggest_workflow()</a></code> is the easiest
way to get started in corella.</p>
<p><code><a href="../reference/suggest_workflow.html">suggest_workflow()</a></code> provides a high level summary
designed to show:</p>
<ol style="list-style-type: decimal">
<li>Which column names match valid Darwin Core terms</li>
<li>The minimum requirements for data in a <a href="https://support.ala.org.au/support/solutions/articles/6000261427-sharing-a-dataset-with-the-ala#create-archive" class="external-link">Darwin
Core Archive</a> (i.e. a completed data resource in Darwin Core
standard).</li>
<li>A suggested workflow to help you add the minimum required
columns</li>
<li>Additional functions that could be added to a piped workflow (based
the provided dataset’s matching Darwin Core column names)</li>
</ol>
<p>The intention of <code><a href="../reference/suggest_workflow.html">suggest_workflow()</a></code> is to provide a
general help function whenever users feel uncertain about what to do
next. Let’s see what the output says about our original dataframe
<code>df</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/suggest_workflow.html">suggest_workflow</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Matching Darwin Core terms</span> <span style="color: #00BBBB;">──────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; Matched 4 of 11 column names to DwC terms:</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Matched: <span style="color: #00BB00;">continent, country, day, month</span></span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> Unmatched: <span style="color: #BB0000;">crs, date, latitude, longitude, n, species, time</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Minimum required Darwin Core terms</span> <span style="color: #00BBBB;">──────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   <span style="color: #0000BB;">Type</span>                      <span style="color: #0000BB;">Matched term(s)</span>  <span style="color: #0000BB;">Missing term(s)</span>                                                                </span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> Identifier (at least one) <span style="color: #00BB00;">-               </span> <span style="color: #BB0000;">occurrenceID, catalogNumber, recordNumber</span>                                       </span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> Record type               <span style="color: #00BB00;">-               </span> <span style="color: #BB0000;">basisOfRecord</span>                                                                   </span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> Scientific name           <span style="color: #00BB00;">-               </span> <span style="color: #BB0000;">scientificName</span>                                                                  </span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> Location                  <span style="color: #00BB00;">-               </span> <span style="color: #BB0000;">decimalLatitude, decimalLongitude, geodeticDatum, coordinateUncertaintyInMeters</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> Date/Time                 <span style="color: #00BB00;">-               </span> <span style="color: #BB0000;">eventDate</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Suggested workflow</span> <span style="color: #00BBBB;">──────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co"><span style="font-style: italic;">#&gt; To make your data Darwin Core compliant, use the following workflow:</span></span></span>
<span><span class="co"><span style="font-style: italic;">#&gt; </span></span></span>
<span><span class="co">#&gt; df |&gt;</span></span>
<span><span class="co">#&gt;   set_occurrences() |&gt;</span></span>
<span><span class="co">#&gt;   set_datetime() |&gt;</span></span>
<span><span class="co">#&gt;   set_coordinates() |&gt;</span></span>
<span><span class="co">#&gt;   set_scientific_name()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="color: #555555;">Additional functions</span></span></span>
<span><span class="co">#&gt; Based on your matched terms, you can also add to your pipe:</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> `set_datetime()` `set_locality()`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">See all `set_` functions at</span></span></span>
<span><span class="co">#&gt;   <span style="color: #555555;">http://corella.ala.org.au/reference/index.html#add-rename-or-edit-columns-to-match-darwin-core-terms</span></span></span></code></pre></div>
<p><code><a href="../reference/suggest_workflow.html">suggest_workflow()</a></code> will update the suggested function
pipe to only suggest functions that are necessary to standardise your
data correctly.</p>
<p>For example, after using one of the suggested functions
<code><a href="../reference/set_occurrences.html">set_occurrences()</a></code>, if we run
<code><a href="../reference/suggest_workflow.html">suggest_workflow()</a></code> again, the output message no longer
suggests <code><a href="../reference/set_occurrences.html">set_occurrences()</a></code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_edited</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_occurrences.html">set_occurrences</a></span><span class="op">(</span></span>
<span>    occurrenceID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    basisOfRecord <span class="op">=</span> <span class="st">"humanObservation"</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_edited</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/suggest_workflow.html">suggest_workflow</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Matching Darwin Core terms</span> <span style="color: #00BBBB;">──────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; Matched 6 of 13 column names to DwC terms:</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Matched: <span style="color: #00BB00;">basisOfRecord, continent, country, day, month, occurrenceID</span></span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> Unmatched: <span style="color: #BB0000;">crs, date, latitude, longitude, n, species, time</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Minimum required Darwin Core terms</span> <span style="color: #00BBBB;">──────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   <span style="color: #0000BB;">Type</span>                      <span style="color: #0000BB;">Matched term(s)</span>  <span style="color: #0000BB;">Missing term(s)</span>                                                                </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Identifier (at least one) <span style="color: #00BB00;">occurrenceID</span>     <span style="color: #BB0000;">-               </span>                                                                </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Record type               <span style="color: #00BB00;">basisOfRecord</span>    <span style="color: #BB0000;">-               </span>                                                                </span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> Scientific name           <span style="color: #00BB00;">-               </span> <span style="color: #BB0000;">scientificName</span>                                                                  </span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> Location                  <span style="color: #00BB00;">-               </span> <span style="color: #BB0000;">decimalLatitude, decimalLongitude, geodeticDatum, coordinateUncertaintyInMeters</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> Date/Time                 <span style="color: #00BB00;">-               </span> <span style="color: #BB0000;">eventDate</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Suggested workflow</span> <span style="color: #00BBBB;">──────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co"><span style="font-style: italic;">#&gt; To make your data Darwin Core compliant, use the following workflow:</span></span></span>
<span><span class="co"><span style="font-style: italic;">#&gt; </span></span></span>
<span><span class="co">#&gt; df |&gt;</span></span>
<span><span class="co">#&gt;   set_datetime() |&gt;</span></span>
<span><span class="co">#&gt;   set_coordinates() |&gt;</span></span>
<span><span class="co">#&gt;   set_scientific_name()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="color: #555555;">Additional functions</span></span></span>
<span><span class="co">#&gt; Based on your matched terms, you can also add to your pipe:</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> `set_datetime()` `set_locality()`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">See all `set_` functions at</span></span></span>
<span><span class="co">#&gt;   <span style="color: #555555;">http://corella.ala.org.au/reference/index.html#add-rename-or-edit-columns-to-match-darwin-core-terms</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="test-your-data">Test your data<a class="anchor" aria-label="anchor" href="#test-your-data"></a>
</h2>
<p>If your dataset already uses valid Darwin Core terms as column names,
instead of working through each <code>set_</code> function, you might
wish to run tests on your entire dataset. To run checks on your data
like a test suite, use <code><a href="../reference/check_dataset.html">check_dataset()</a></code>. Much like
<code>devtools::test()</code> or <code>devtools::check()</code>,
<code><a href="../reference/check_dataset.html">check_dataset()</a></code> runs the relevant check on each matching
Darwin Core column and returns a summary of the results, along with any
error messages returned by those checks.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  latitude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">35.310</span>, <span class="st">"-35.273"</span><span class="op">)</span>, <span class="co"># deliberate error for demonstration purposes</span></span>
<span>  longitude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">149.125</span>, <span class="fl">149.133</span><span class="op">)</span>,</span>
<span>  date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"14-01-2023"</span>, <span class="st">"15-01-2023"</span><span class="op">)</span>,</span>
<span>  individualCount <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Callocephalon fimbriatum"</span>, <span class="st">"Eolophus roseicapilla"</span><span class="op">)</span>,</span>
<span>  country <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AU"</span>, <span class="st">"AU"</span><span class="op">)</span>,</span>
<span>  occurrenceStatus <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"present"</span>, <span class="st">"present"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/check_dataset.html">check_dataset</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Testing data</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> | <span style="color: #BBBB00;">E</span> <span style="color: #00BB00;">P</span> | Column</span></span>
<span><span class="co">#&gt; ⠙ | 0  individualCount</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> | 1 <span style="color: #BB0000;">✖</span> | individualCount  <span style="color: #B2B2B2;">[31ms]</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ⠙ | 0  country</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> | 1 <span style="color: #BB0000;">✖</span> | country          <span style="color: #B2B2B2;">[25ms]</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ══ Results ═════════════════════════════════════════════════════════════════════</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [ <span style="color: #BBBB00;">Errors</span>: 2 | <span style="color: #00BB00;">Pass</span>: 0 ]</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Checking Darwin Core compliance</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> Data does not meet minimum Darwin Core column requirements</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `suggest_workflow()` to see more information.</span></span>
<span><span class="co">#&gt; ── <span style="color: #BBBB00; font-weight: bold;">Error</span> in individualCount ────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">individualCount</span> values do not match <span style="color: #00BB00;">occurrenceStatus</span>.</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> Found 1 row where individualCount = 0 but occurrenceStatus = "present".</span></span>
<span><span class="co">#&gt; ── <span style="color: #BBBB00; font-weight: bold;">Error</span> in country ────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Unexpected value in <span style="color: #00BB00;">country</span>.</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> Invalid value: "AU"</span></span></code></pre></div>
<p>The goal of <code><a href="../reference/check_dataset.html">check_dataset()</a></code> is to make running many
checks more efficient, and to cater to users who prefer a
test-suite-like workflow.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dax Kellie, Shandiya Balasubramanium, Martin Westgate.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
